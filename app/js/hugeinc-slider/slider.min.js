/*! Slider - v0.1.0 - 2014-05-19
* Copyright (c) 2014 Wes Hatch; Licensed MIT */
var slider=function(a){"use strict";function b(){a(window).on({"DOMMouseScroll mousewheel":f,keydown:g,resize:n}),q.on({touchstart:c,touchmove:d,touchend:e})}function c(a){null===G&&(a.originalEvent.touches&&(a=a.originalEvent.touches[0]),G=a.clientY,v=r.eq(z)[0],v.classList.add("no-animation"),w=r.eq(z-1)[0],w.classList.add("no-animation"))}function d(a){if(!y)return!0;if(null!==G){if(a.originalEvent.touches&&(a=a.originalEvent.touches[0]),F=G-a.clientY,H=F/u,H>0){if(z===t)return h(!1,!0),!0;v.style.height=100-100*H+"%",w&&(w.style.height="")}else w&&(w.style.height=100*-H+"%",v.style.height="");return!1}}function e(){if(G=null,v.classList.remove("no-animation"),w&&w.classList.remove("no-animation"),!y){var b=a("#wrap")[0].getBoundingClientRect().top;return b>=0?(h(!0,!0),!1):!0}H>=E?k():Math.abs(H)>=E?j():i(),H=0}function f(b){if(x)return!1;if(b.originalEvent.detail<0||b.originalEvent.wheelDelta>0){if(0===z)return!1;if(F--,Math.abs(F)>=B){if(!y){var c=a("#content")[0].getBoundingClientRect().top;return 0===c?(h(!0),!1):!0}j()}}else{if(!y)return!0;F++,F>=B&&k()}return!1}function g(a){(37===a.keyCode||38===a.keyCode)&&j(),(39===a.keyCode||40===a.keyCode)&&k()}function h(b,c){F=0,y=b,x=!0,c?b&&setTimeout(scrollTo,0,0,1):(a("body").toggleClass("shifted",!b),setTimeout(function(){a("body").css("overflow",b?"hidden":"auto"),x=!1},950))}function i(){F=0,x=!0,r.each(function(b,c){c.style.height="",a(c).toggleClass("active",b>=z)}),s.removeClass("active").eq(z).addClass("active")}function j(){z--,0>z&&(z=0),i()}function k(){return z===t?(h(!1),!1):(z++,z>t&&(z=t),void i())}function l(){D||A&&(u=p(),q=a("#projects"),r=q.find(".slide"),t=r.length-1,s=a("#projects nav span").not(".mosaic-link"),a("body").addClass("gallery"),b(),m(),o(),r.each(function(){a(this).on(A.end,function(a){a.stopPropagation(),a.target==this&&(x=!1)})}),a("#wrap").on(A.end,function(a){a.target==this&&(x=!1)}))}function m(){s.each(function(b){a(this).click(function(){z=b,i()})})}function n(){C&&(u=p(),a("body").css("height",u))}function o(){var b;if(C)switch(setTimeout(scrollTo,0,0,1),a(window).resize(),u=p(),b=u-100,a("body").css("height",u),window.orientation){case-90:case 90:a(".slide").css("-webkit-background-size","auto "+b+"px"),a(".slide").css("background-size","auto "+b+"px");break;default:a(".slide").css("-webkit-background-size","auto "+b+"px"),a(".slide").css("background-size","auto "+b+"px")}}function p(){return window.innerHeight||document.documentElement.offsetHeight||document.documentElement.clientHeight}var q,r,s,t,u,v,w,x=!1,y=!0,z=0,A=function(){var a=function(){var a,b=document.createElement("fake"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(a in c)if(void 0!==b.style[a])return c[a]}();return a&&{end:a}}(),B=5,C=navigator.userAgent.match(/(iPad|iPhone|iPod|Android)/g),D=/Android /.test(window.navigator.appVersion)&&!/Chrome\/\d/.test(window.navigator.appVersion),E=.15,F=0,G=null,H=0;return{init:function(){window.console.log("slider init"),l()}}}(jQuery);