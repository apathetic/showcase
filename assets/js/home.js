!function(){"use strict";var t=function(t,i){var e=this;void 0===i&&(i={}),this.handle=t,this.options={animateClass:"animate",activeClass:"active",slideWrap:"ul",slides:"li",infinite:!0,display:1,disableDragging:!1,initialIndex:0},this.current=0,this.slides=[],this.sliding=!1,this.cloned=0,this.active=!0,this.dragging=!1,this.dragThreshold=50,this.deltaX=0,this.isTouch="ontouchend"in document,["transform","webkitTransform","MozTransform","OTransform","msTransform"].forEach(function(t){void 0!==document.body.style[t]&&(e.transform=t)}),this.options=this._assign(this.options,i),this.init()};t.prototype.init=function(){var t=this;return this.slideWrap=this.handle.querySelector(this.options.slideWrap),this.slides=this.slideWrap.querySelectorAll(this.options.slides),this.numSlides=this.slides.length,this.current=this.options.initialIndex,!this.slideWrap||!this.slides||this.numSlides<this.options.display?(console.log("Carousel: insufficient # slides"),this.active=!1):(this.options.infinite&&this._cloneSlides(),this._createBindings(),this._getDimensions(),this.go(this.current,!1),this.options.disableDragging||(this.isTouch?["touchstart","touchmove","touchend","touchcancel"].map(function(i){t.handle.addEventListener(i,t._bindings[i])}):["mousedown","mousemove","mouseup","mouseleave","click"].map(function(i){t.handle.addEventListener(i,t._bindings[i])})),window.addEventListener("resize",this._bindings.resize),window.addEventListener("orientationchange",this._bindings.orientationchange),this)},t.prototype.destroy=function(){var t=this;if(this.active){for(var i in t._bindings)t.handle.removeEventListener(i,t._bindings[i]);window.removeEventListener("resize",this._bindings.resize),window.removeEventListener("orientationchange",this._bindings.orientationchange),this._bindings=null,this.options=this.slides=this.slideWrap=this.handle=null,this.active=!1}},t.prototype.next=function(){this.options.infinite||this.current!==this.numSlides-1?this.go(this.current+1):this.go(this.numSlides-1)},t.prototype.prev=function(){this.options.infinite||0!==this.current?this.go(this.current-1):this.go(0)},t.prototype.go=function(t,i){void 0===i&&(i=!0);var e=this.options;if(!this.sliding&&this.active){if(t<0||t>=this.numSlides){var s=t<0?this.current+this.numSlides:this.current-this.numSlides;this._slide(-(s*this.width-this.deltaX)),this.slideWrap.offsetHeight}t=this._loop(t),this._slide(-t*this.width,i),e.onSlide&&t!==this.current&&e.onSlide.call(this,t,this.current),this._removeClass(this.slides[this.current],e.activeClass),this._addClass(this.slides[t],e.activeClass),this.current=t}},t.prototype._createBindings=function(){var t=this;this._bindings={touchstart:function(i){t._dragStart(i)},touchmove:function(i){t._drag(i)},touchend:function(i){t._dragEnd(i)},touchcancel:function(i){t._dragEnd(i)},mousedown:function(i){t._dragStart(i)},mousemove:function(i){t._drag(i)},mouseup:function(i){t._dragEnd(i)},mouseleave:function(i){t._dragEnd(i)},click:function(i){t._checkDragThreshold(i)},resize:function(i){t._updateView(i)},orientationchange:function(i){t._updateView(i)}}},t.prototype._checkDragThreshold=function(t){this.dragThresholdMet&&t.preventDefault()},t.prototype._dragStart=function(t){var i;if(this.sliding)return!1;t=t.originalEvent||t,i=void 0!==t.touches&&t.touches,this.dragThresholdMet=!1,this.dragging=!0,this.startClientX=i?i[0].pageX:t.clientX,this.startClientY=i?i[0].pageY:t.clientY,this.deltaX=0,this.deltaY=0,"IMG"!==t.target.tagName&&"A"!==t.target.tagName||(t.target.draggable=!1)},t.prototype._drag=function(t){var i;this.dragging&&(t=t.originalEvent||t,i=void 0!==t.touches&&t.touches,this.deltaX=(i?i[0].pageX:t.clientX)-this.startClientX,this.deltaY=(i?i[0].pageY:t.clientY)-this.startClientY,this._slide(-(this.current*this.width-this.deltaX)),this.dragThresholdMet=Math.abs(this.deltaX)>this.dragThreshold)},t.prototype._dragEnd=function(t){this.dragging&&(this.dragThresholdMet&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()),this.dragging=!1,0!==this.deltaX&&Math.abs(this.deltaX)<this.dragThreshold?this.go(this.current):this.deltaX>0?this.prev():this.deltaX<0&&this.next(),this.deltaX=0)},t.prototype._slide=function(t,i){var e=this;t-=this.offset,i&&(this.sliding=!0,this._addClass(this.slideWrap,this.options.animateClass),setTimeout(function(){e.sliding=!1,e.active&&e._removeClass(e.slideWrap,e.options.animateClass)},400)),this.transform?this.slideWrap.style[this.transform]="translate3d("+t+"px, 0, 0)":this.slideWrap.style.left=t+"px"},t.prototype._loop=function(t){return(this.numSlides+t%this.numSlides)%this.numSlides},t.prototype._getDimensions=function(){this.width=this.slides[0].getBoundingClientRect().width,this.offset=this.cloned*this.width},t.prototype._updateView=function(){var t=this;window.innerWidth!==this._viewport&&(this._viewport=window.innerWidth,clearTimeout(this.timer),this.timer=setTimeout(function(){t._getDimensions(),t.go(t.current)},300))},t.prototype._cloneSlides=function(){for(var t,i=this,e=this.options.display,s=Math.max(this.numSlides-e,0),n=Math.min(e,this.numSlides),o=this.numSlides;o>s;o--)t=i.slides[o-1].cloneNode(!0),t.removeAttribute("id"),t.setAttribute("aria-hidden","true"),i._addClass(t,"clone"),i.slideWrap.insertBefore(t,i.slideWrap.firstChild),i.cloned++;for(var r=0;r<n;r++)t=i.slides[r].cloneNode(!0),t.removeAttribute("id"),t.setAttribute("aria-hidden","true"),i._addClass(t,"clone"),i.slideWrap.appendChild(t)},t.prototype._addClass=function(t,i){t.classList?t.classList.add(i):t.className+=" "+i},t.prototype._removeClass=function(t,i){t.classList?t.classList.remove(i):t.className=t.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," ")},t.prototype._assign=function(t,i){return Object.keys(i).forEach(function(e){t[e]=i[e]}),t};var i=document.querySelector("#featured"),e=document.querySelectorAll("main section"),s=document.querySelectorAll(".filters li"),n=i.querySelectorAll("nav li"),o=new t(i,{slides:".carousel__slide",onSlide:function(t){for(var i=n.length;i--;)n[i].classList.remove("active");n[t].classList.add("active")}});i.querySelector(".prev").addEventListener("click",function(){o.prev()}),i.querySelector(".next").addEventListener("click",function(){o.next()}),Array.prototype.forEach.call(n,function(t,i){t.addEventListener("click",function(){o.go(i)})}),Array.prototype.forEach.call(s,function(t){var i=t.getAttribute("data-filter");t.addEventListener("click",function(n){n.preventDefault();for(var o=s.length;o--;)s[o].classList.remove("active");t.classList.add("active");for(var r=e.length;r--;){var a=void 0,d=void 0;d=e[r].getAttribute("data-tags")||"",d=d.toLowerCase(),a=new RegExp(i,"i"),d.match(a)?e[r].classList.remove("collapsed"):e[r].classList.add("collapsed")}})})}();
